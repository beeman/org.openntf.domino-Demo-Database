<?xml version="1.0" encoding="UTF-8"?>
<xp:view xmlns:xp="http://www.ibm.com/xsp/core" xmlns:xc="http://www.ibm.com/xsp/custom"
	xmlns:xe="http://www.ibm.com/xsp/coreex">

	<!--
		Copyright 2013 Paul Withers Licensed under the Apache License, Version 2.0
		(the "License"); you may not use this file except in compliance with the
		License. You may obtain a copy of the License at

		http://www.apache.org/licenses/LICENSE-2.0 Unless required by applicable law
		or agreed to in writing, software distributed under the License is distributed
		on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either
		express or implied. See the License for the specific language governing
		permissions and limitations under the License
	-->


	<xc:ccLayoutOneUI selected="dateTime">
		<xp:this.facets>
			<xc:LeftCore xp:key="LeftColumn"></xc:LeftCore>
			<xp:div xp:key="facet_1" style="text-align:center" id="panel1">
				<xp:text tagName="h1" value="DateTime"></xp:text>
				<hr></hr>
				<xp:div styleClass="lotusInfoBox">
					<xp:text escape="false">
						<xp:this.value><![CDATA[Demonstrates new methods on DateTime class]]>
						</xp:this.value>
					</xp:text>
				</xp:div>
				<xe:djTabContainer id="djTabContainer1" style="width:100%;height:700px"
					doLayout="true" tabStrip="true">
					<xe:djTabPane id="ssjs" title="SSJS">
						<xp:div id="SSJSDiv">
							<xp:messages id="messages1"></xp:messages>
							<xp:button value="Run SSJS Tests" id="button2">
								<xp:eventHandler event="onclick" submit="true"
									refreshMode="partial" refreshId="SSJSDiv">
									<xp:this.action><![CDATA[#{javascript:try {
	var now = new java.util.Date();
	var date1 = opensession.createDateTime(now);
	var date2 = opensession.createDateTime(now);
	date2.adjustDay(1);
	var retVal;
	retVal = "Running SSJS date1.isBefore(date2)<br/>";
	if (date1.isBefore(date2)) {
		retVal += @Text(date1) + " is before " + @Text(date2) + "<br/>";
	} else {
		retVal += @Text(date1) + " is NOT before " + @Text(date2) + "<br/>";
	}

	date2.adjustHour(-29);
	retVal += "Running SSJS date1.equalsIgnoreTime(date2)<br/>";
	if (date1.equalsIgnoreTime(date2)) {
		retVal += @Text(date1) + " is same day as " + @Text(date2);
	} else {
		retVal += @Text(date1) + " is NOT same day as " + @Text(date2);
	}
	viewScope.put("datesTest",retVal);
} catch (e) {
	viewScope.put("datesTest",e.toString());
}}]]></xp:this.action>
								</xp:eventHandler>
							</xp:button>
							<xp:br></xp:br>
							<xp:text id="datesBefore" value="#{viewScope.datesTest}" escape="false">
							</xp:text>
							<xp:text escape="true" id="computedField2">
								<xp:this.value><![CDATA[#{javascript:importPackage(org.openntf.dominoTests);
Utils.getMethodText();}]]></xp:this.value>
							</xp:text></xp:div>
					</xe:djTabPane>
					<xe:djTabPane id="java" title="Java">
						<xp:div id="JavaDiv">
							<xp:button value="Run Java Tests" id="button3">
								<xp:eventHandler event="onclick" submit="true"
									refreshMode="partial" refreshId="JavaDiv" action="#{openNTFDominoBean.runDateTimes}">
								</xp:eventHandler>
							</xp:button>
							<xp:br></xp:br>
							<xp:text id="computedField1" value="#{viewScope.datesTestJava}"
								escape="false">
							</xp:text>
						</xp:div>
					</xe:djTabPane>
					<xe:djTabPane id="javaCompare" title="Java Comparator">
						<xp:div style="float:left">
							<xp:text id="compar1" escape="false">
								<xp:this.value><![CDATA[try {<br/>
			Session s = ExtLibUtil.getCurrentSession();<br/>
			Date d = new Date();<br/>
			DateTime dt1 = s.createDateTime(d);<br/>
			DateTime dt2 = s.createDateTime(d);<br/>
			Date dt1j = dt1.toJavaDate();<br/>
			Date dt2j = dt2.toJavaDate();<br/>
			if (dt1j.before(dt2j)) {<br/>
				System.out.println("Date 1 before Date 2");<br/>
			} else {<br/>
				System.out.println("Date 1 not before Date 2");<br/>
			}<br/>
			dt1.recycle();<br/>
			dt2.recycle();<br/>
		} catch (NotesException ne) {<br/>
			//doSomething<br/>
		}]]></xp:this.value>
							</xp:text>
						</xp:div>
						<xp:div style="float:right">
							<xp:text id="compar2" escape="false">
								<xp:this.value><![CDATA[Session s = (Session) ExtLibUtil.resolveVariable(FacesContext.getCurrentInstance(), "opensession");<br/>
		Date d = new Date();<br/>
		DateTime dt1 = s.createDateTime(d);<br/>
		DateTime dt2 = s.createDateTime(d);<br/>
		if (dt1.isBefore(dt2)) {<br/>
			System.out.println("Date 1 before Date 2");<br/>
		} else {<br/>
			System.out.println("Date 1 not before Date 2");<br/>
		}]]></xp:this.value>
							</xp:text>
						</xp:div>
						<xp:div style="clear:left">
							<xp:text escape="false">
								<xp:this.value><![CDATA[#{javascript:importPackage(org.openntf.dominoTests);
Utils.runComparison(getComponent("compar1").getValue(),getComponent("compar2").getValue());}]]></xp:this.value>
							</xp:text>
						</xp:div>
					</xe:djTabPane>
				</xe:djTabContainer>
			</xp:div>

		</xp:this.facets>
	</xc:ccLayoutOneUI>
</xp:view>
